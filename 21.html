<html>

<head>
	<link rel="stylesheet" type="text/css" href="bootstrap.css">
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
	<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
	<script type="text/javascript">

		window.onload=function(){		

			$.ajax({
			  dataType: "json",
			  url: 'ama-1.json',
			  success: success
			});


		}

			function success(data){

				rtes = {"T5": data["features"][0], "21": data["features"][4], "53":data["features"][3]}

				id = 'mrcactu5.l36oika2';
				var mapboxUrl = 'https://{s}.tiles.mapbox.com/v3/'+ id  +  '/{z}/{x}/{y}.png';
				var mapboxTiles = L.tileLayer( mapboxUrl , {
					attribution: '<a href="http://www.mapbox.com/about/maps/" target="_blank">Terms &amp; Feedback</a>'
				});
				var map = L.map('map')
						.addLayer(mapboxTiles)
						.setView([18.455, -66.07], 14);

				busPath = new L.polyline( rtes["21"]['geometry']['coordinates'].map(swap), { color: "green" } );
				busPath.addTo(map);

			}

		function swap(x){ return [x[1], x[0]]; }

		/*var rte = {"T5":0, "21":0, "53":0}



		function toggle(x){
			if(rte[x] == 0){ 
				busPath = new L.polyline( rtes[x]['geometry']['coordinates'].map(swap), { color: "green" } );
				busPath.addTo(map);
			} else { console.log("switch on");}
			rte[x] = 1 - rte[x];
			console.log(rte);
		}*/



	</script>
	<style>
		#map { height: 460px; width:100%; }
	</style>
</head>


<body>


<div class="navbar">
    <div class="navbar-inner">
      <div class="container" style="width: auto;">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
        <a class="brand" href="#">Gu&iacute;a de San Juan</a>
        <div class="nav-collapse">
          <ul class="nav">
            <li class="dropdown active">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Routes<b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li onclick="toggle('T5')"><a href="T5.html">T5</a></li>
                <li onclick="toggle('21')"><a href="21.html">21</a></li>
                <li onclick="toggle('53')"><a href="53.html">53</a></li>
              </ul>
            </li>
            <!-- <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Regional Maps <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="#">San Juan - Condado - Isla Verde</a></li>
                <li><a href="#" class="btn disabled"><del>Carolina</del></a></li>
                <li><a href="#"><del>Rio Piedras - Hato Rey</del></a></li>
                <li><a href="#"><del>Bayam&oacute;n</del></a></li>
                <li class="divider"></li>
                <li><a href="#"><del>San Juan Metro Area</del></a></li>
              </ul>
            </li> -->
          </ul>
        </div><!-- /.nav-collapse -->
      </div>
    </div><!-- /navbar-inner -->
  </div>

<!-- <div class="container" style="width: auto;">
<iframe width='100%' height='500px' frameBorder='0' src='https://a.tiles.mapbox.com/v4/mrcactu5.l36oika2/attribution,zoompan,zoomwheel,geocoder,share.html?access_token=pk.eyJ1IjoibXJjYWN0dTUiLCJhIjoiQTRkSV9RYyJ9.rh4ebAEJ1_8UJXW15FvKgQ'></iframe>
</div> -->

<div class="container" style="width: auto;" >
<div id="map"></div>
</div>

<script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
<script src="bootstrap.js"></script>
</body>

</html>
